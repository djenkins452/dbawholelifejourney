{% extends "base.html" %}

{% block title %}Significant Events - Life{% endblock %}

{% block content %}
<div class="container">
    <nav class="breadcrumb mb-4">
        <a href="{% url 'life:home' %}">Life</a>
        <span>/</span>
        <span>Significant Events</span>
    </nav>

    <div class="page-header">
        <div>
            <h1 class="page-title">Significant Events</h1>
            <p class="page-subtitle">Birthdays, anniversaries, and moments that matter</p>
        </div>
        <a href="{% url 'life:significant_event_create' %}" class="btn btn-primary">
            <svg viewBox="0 0 24 24" width="18" height="18" fill="none" stroke="currentColor" stroke-width="2">
                <line x1="12" y1="5" x2="12" y2="19"/>
                <line x1="5" y1="12" x2="19" y2="12"/>
            </svg>
            Add Event
        </a>
    </div>

    {% if upcoming_count > 0 %}
    <div class="upcoming-banner">
        <span class="upcoming-badge">{{ upcoming_count }}</span>
        <span>event{{ upcoming_count|pluralize }} coming up in the next 30 days</span>
    </div>
    {% endif %}

    {% if events %}
    <div class="event-grid">
        {% for event in events %}
        <a href="{{ event.get_absolute_url }}" class="event-card {% if event.days_until == 0 %}today{% elif event.days_until <= 7 %}soon{% endif %}">
            <div class="event-icon">
                {% if event.event_type == 'birthday' %}ğŸ‚
                {% elif event.event_type == 'anniversary' %}ğŸ’
                {% elif event.event_type == 'memorial' %}ğŸ•¯ï¸
                {% elif event.event_type == 'milestone' %}ğŸ†
                {% elif event.event_type == 'holiday' %}ğŸ‰
                {% else %}ğŸ“…{% endif %}
            </div>
            <div class="event-info">
                <h3 class="event-title">{{ event.title }}</h3>
                {% if event.person_name %}
                <p class="event-person">{{ event.person_name }}</p>
                {% endif %}
                <p class="event-date">
                    {{ event.next_occurrence|date:"M d" }}
                    {% with years=event.get_years_display %}
                    {% if years %}<span class="event-years">({{ years }})</span>{% endif %}
                    {% endwith %}
                </p>
            </div>
            <div class="event-countdown">
                {% if event.days_until == 0 %}
                <span class="countdown-today">Today!</span>
                {% elif event.days_until == 1 %}
                <span class="countdown-soon">Tomorrow</span>
                {% elif event.days_until <= 7 %}
                <span class="countdown-soon">In {{ event.days_until }} days</span>
                {% else %}
                <span class="countdown-later">{{ event.days_until }} days</span>
                {% endif %}
            </div>
        </a>
        {% endfor %}
    </div>
    {% else %}
    <div class="empty-state">
        <span class="empty-emoji">ğŸ‚</span>
        <h2>No significant events yet</h2>
        <p>Add birthdays, anniversaries, and other important dates to never miss a moment.</p>
        <a href="{% url 'life:significant_event_create' %}" class="btn btn-primary">Add Your First Event</a>
    </div>
    {% endif %}
</div>

<style>
.upcoming-banner {
    display: flex;
    align-items: center;
    gap: var(--space-3);
    padding: var(--space-4);
    background: var(--color-surface);
    border-radius: var(--radius-lg);
    margin-bottom: var(--space-6);
}

.upcoming-badge {
    background: var(--color-accent);
    color: white;
    padding: var(--space-1) var(--space-3);
    border-radius: var(--radius-full);
    font-weight: 600;
}

.event-grid {
    display: flex;
    flex-direction: column;
    gap: var(--space-3);
}

.event-card {
    display: flex;
    align-items: center;
    gap: var(--space-4);
    padding: var(--space-4) var(--space-5);
    background: var(--color-background);
    border: 1px solid var(--color-border);
    border-radius: var(--radius-lg);
    text-decoration: none;
    color: inherit;
    transition: all var(--transition-fast);
}

.event-card:hover {
    border-color: var(--color-accent);
    transform: translateX(4px);
}

.event-card.today {
    border-left: 4px solid var(--color-success);
    background: linear-gradient(90deg, rgba(34, 197, 94, 0.1) 0%, var(--color-background) 100%);
}

.event-card.soon {
    border-left: 4px solid var(--color-warning);
}

.event-icon {
    font-size: 2rem;
    width: 48px;
    height: 48px;
    display: flex;
    align-items: center;
    justify-content: center;
    background: var(--color-surface);
    border-radius: var(--radius-lg);
}

.event-info {
    flex: 1;
}

.event-title {
    font-size: var(--font-size-lg);
    font-weight: 600;
    margin: 0 0 var(--space-1) 0;
}

.event-person {
    font-size: var(--font-size-sm);
    color: var(--color-text-muted);
    margin: 0 0 var(--space-1) 0;
}

.event-date {
    font-size: var(--font-size-sm);
    color: var(--color-text-muted);
    margin: 0;
}

.event-years {
    color: var(--color-accent);
}

.event-countdown {
    text-align: right;
    min-width: 80px;
}

.countdown-today {
    font-weight: 700;
    color: var(--color-success);
    font-size: var(--font-size-lg);
}

.countdown-soon {
    font-weight: 600;
    color: var(--color-warning);
}

.countdown-later {
    color: var(--color-text-muted);
}

.empty-state {
    text-align: center;
    padding: var(--space-12) var(--space-4);
}

.empty-emoji {
    font-size: 4rem;
    display: block;
    margin-bottom: var(--space-4);
}

.empty-state h2 {
    margin-bottom: var(--space-2);
}

.empty-state p {
    color: var(--color-text-muted);
    margin-bottom: var(--space-6);
}
</style>
{% endblock %}
