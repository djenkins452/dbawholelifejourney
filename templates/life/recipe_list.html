{% extends "base.html" %}

{% block title %}Recipes - Life{% endblock %}

{% block content %}
<div class="container">
    <nav class="breadcrumb mb-4">
        <a href="{% url 'life:home' %}">Life</a>
        <span>/</span>
        <span>Recipes</span>
    </nav>

    <div class="page-header">
        <div>
            <h1 class="page-title">Recipes</h1>
            <p class="page-subtitle">Family favorites and culinary memories</p>
        </div>
        <a href="{% url 'life:recipe_create' %}" class="btn btn-primary">
            <svg viewBox="0 0 24 24" width="18" height="18" fill="none" stroke="currentColor" stroke-width="2">
                <line x1="12" y1="5" x2="12" y2="19"/>
                <line x1="5" y1="12" x2="19" y2="12"/>
            </svg>
            Add Recipe
        </a>
    </div>
    
    <!-- Filters -->
    <div class="filters-bar mb-6">
        <a href="{% url 'life:recipe_list' %}" class="filter-btn {% if not request.GET.favorites and not request.GET.category %}active{% endif %}">All</a>
        <a href="?favorites=1" class="filter-btn {% if request.GET.favorites %}active{% endif %}">‚≠ê Favorites</a>
        {% for cat in categories %}
        <a href="?category={{ cat }}" class="filter-btn {% if request.GET.category == cat %}active{% endif %}">{{ cat }}</a>
        {% endfor %}
        
        <form method="get" class="search-form ml-auto">
            <input type="text" name="q" value="{{ request.GET.q }}" placeholder="Search recipes..." class="form-input form-input-sm">
        </form>
    </div>
    
    {% if recipes %}
    <div class="recipe-grid">
        {% for recipe in recipes %}
        <a href="{{ recipe.get_absolute_url }}" class="recipe-card">
            {% if recipe.image %}
            <div class="recipe-image" style="background-image: url('{{ recipe.image.url }}')">
                {% if recipe.is_favorite %}
                <span class="favorite-badge">‚≠ê</span>
                {% endif %}
            </div>
            {% else %}
            <div class="recipe-image recipe-placeholder">
                <span class="recipe-emoji">üçΩÔ∏è</span>
                {% if recipe.is_favorite %}
                <span class="favorite-badge">‚≠ê</span>
                {% endif %}
            </div>
            {% endif %}
            <div class="recipe-content">
                <h3 class="recipe-title">{{ recipe.title }}</h3>
                {% if recipe.category %}
                <p class="recipe-category">{{ recipe.category }}</p>
                {% endif %}
                <div class="recipe-meta">
                    {% if recipe.total_time_minutes %}
                    <span class="recipe-time">
                        <svg viewBox="0 0 24 24" width="14" height="14" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="12" cy="12" r="10"/>
                            <polyline points="12 6 12 12 16 14"/>
                        </svg>
                        {{ recipe.total_time_minutes }} min
                    </span>
                    {% endif %}
                    {% if recipe.difficulty %}
                    <span class="recipe-difficulty difficulty-{{ recipe.difficulty }}">{{ recipe.get_difficulty_display }}</span>
                    {% endif %}
                </div>
            </div>
        </a>
        {% endfor %}
    </div>
    {% else %}
    <div class="empty-state">
        <span class="empty-emoji">üìñ</span>
        <h2>No recipes yet</h2>
        <p>Save your favorite recipes and family traditions.</p>
        <a href="{% url 'life:recipe_create' %}" class="btn btn-primary">Add Your First Recipe</a>
    </div>
    {% endif %}
</div>

<style>
.filters-bar {
    display: flex;
    gap: var(--space-2);
    flex-wrap: wrap;
    align-items: center;
}

.filter-btn {
    font-size: var(--font-size-sm);
    padding: var(--space-2) var(--space-3);
    border-radius: var(--radius-md);
    text-decoration: none;
    color: var(--color-text-muted);
    transition: all var(--transition-fast);
}

.filter-btn:hover {
    background: var(--color-surface);
    color: var(--color-text);
}

.filter-btn.active {
    background: var(--color-accent);
    color: white;
}

.search-form {
    min-width: 200px;
}

.form-input-sm {
    padding: var(--space-2) var(--space-3);
    font-size: var(--font-size-sm);
}

.ml-auto {
    margin-left: auto;
}

.recipe-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
    gap: var(--space-5);
}

.recipe-card {
    background: var(--color-background);
    border: 1px solid var(--color-border);
    border-radius: var(--radius-lg);
    overflow: hidden;
    text-decoration: none;
    color: inherit;
    transition: all var(--transition-fast);
}

.recipe-card:hover {
    border-color: var(--color-accent);
    transform: translateY(-2px);
}

.recipe-image {
    height: 180px;
    background-size: cover;
    background-position: center;
    position: relative;
}

.recipe-placeholder {
    display: flex;
    align-items: center;
    justify-content: center;
    background: var(--color-surface);
}

.recipe-emoji {
    font-size: 3rem;
}

.favorite-badge {
    position: absolute;
    top: var(--space-3);
    right: var(--space-3);
    font-size: var(--font-size-lg);
}

.recipe-content {
    padding: var(--space-4);
}

.recipe-title {
    font-size: var(--font-size-lg);
    margin: 0 0 var(--space-1) 0;
}

.recipe-category {
    font-size: var(--font-size-sm);
    color: var(--color-text-muted);
    margin: 0 0 var(--space-3) 0;
}

.recipe-meta {
    display: flex;
    gap: var(--space-3);
    align-items: center;
}

.recipe-time {
    display: flex;
    align-items: center;
    gap: var(--space-1);
    font-size: var(--font-size-xs);
    color: var(--color-text-muted);
}

.recipe-difficulty {
    font-size: var(--font-size-xs);
    padding: var(--space-1) var(--space-2);
    border-radius: var(--radius-sm);
}

.difficulty-easy {
    background: color-mix(in srgb, #10b981 15%, transparent);
    color: #10b981;
}

.difficulty-medium {
    background: color-mix(in srgb, #f59e0b 15%, transparent);
    color: #f59e0b;
}

.difficulty-hard {
    background: color-mix(in srgb, var(--color-error) 15%, transparent);
    color: var(--color-error);
}

.empty-state {
    text-align: center;
    padding: var(--space-12) var(--space-4);
}

.empty-emoji {
    font-size: 4rem;
    display: block;
    margin-bottom: var(--space-4);
}

.empty-state h2 {
    margin-bottom: var(--space-2);
}

.empty-state p {
    color: var(--color-text-muted);
    margin-bottom: var(--space-6);
}
</style>
{% endblock %}
