{% extends "base.html" %}
{% load static %}

{% block title %}{{ template.name }} - Whole Life Journey{% endblock %}

{% block content %}
<div class="container">
    <nav class="breadcrumb mb-4">
        <a href="{% url 'health:home' %}">Health</a>
        <span>/</span>
        <a href="{% url 'health:fitness_home' %}">Fitness</a>
        <span>/</span>
        <a href="{% url 'health:template_list' %}">Templates</a>
        <span>/</span>
        <span>{{ template.name|truncatewords:3 }}</span>
    </nav>

    <div class="page-header">
        <div>
            <h1 class="page-title">{{ template.name }}</h1>
            {% if template.description %}
                <p class="page-subtitle">{{ template.description }}</p>
            {% endif %}
        </div>
        <div class="header-actions">
            <a href="{% url 'health:template_use' template.pk %}" class="btn btn-primary">
                <svg class="btn-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <polygon points="5 3 19 12 5 21 5 3"></polygon>
                </svg>
                Use Template
            </a>
            <a href="{% url 'health:template_update' template.pk %}" class="btn btn-secondary">
                <svg class="btn-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"></path>
                    <path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"></path>
                </svg>
                Edit
            </a>
        </div>
    </div>

    <!-- Exercises List -->
    <div class="template-content">
        <h2>Exercises ({{ template.exercise_count }})</h2>

        <div class="exercises-list">
            {% for te in template_exercises %}
                <div class="exercise-item">
                    <div class="exercise-order">{{ forloop.counter }}</div>
                    <div class="exercise-info">
                        <span class="exercise-name">{{ te.exercise.name }}</span>
                        {% if te.exercise.muscle_group %}
                            <span class="muscle-group">{{ te.exercise.muscle_group }}</span>
                        {% endif %}
                    </div>
                    {% if te.exercise.category == "resistance" %}
                        <span class="default-sets">{{ te.default_sets }} sets</span>
                    {% else %}
                        <span class="exercise-type">Cardio</span>
                    {% endif %}
                </div>
            {% empty %}
                <p class="text-muted">No exercises in this template</p>
            {% endfor %}
        </div>
    </div>

    <!-- Delete Form -->
    <div class="danger-zone mt-8">
        <form method="post" action="{% url 'health:template_delete' template.pk %}" onsubmit="return confirm('Delete this template? This cannot be undone.');">
            {% csrf_token %}
            <button type="submit" class="btn btn-danger">Delete Template</button>
        </form>
    </div>

    <div class="back-link mt-6">
        <a href="{% url 'health:template_list' %}">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <line x1="19" y1="12" x2="5" y2="12"></line>
                <polyline points="12 19 5 12 12 5"></polyline>
            </svg>
            Back to Templates
        </a>
    </div>
</div>

<style>
.page-header {
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    margin-bottom: var(--space-6);
}

.header-actions {
    display: flex;
    gap: var(--space-2);
}

.btn-icon {
    width: 16px;
    height: 16px;
    margin-right: var(--space-2);
}

.template-content {
    background: var(--color-background);
    border: 1px solid var(--color-border);
    border-radius: var(--radius-lg);
    padding: var(--space-5);
}

.template-content h2 {
    font-size: var(--font-size-lg);
    margin: 0 0 var(--space-4) 0;
}

.exercises-list {
    display: flex;
    flex-direction: column;
    gap: var(--space-2);
}

.exercise-item {
    display: flex;
    align-items: center;
    gap: var(--space-4);
    padding: var(--space-3);
    background: var(--color-surface);
    border-radius: var(--radius-md);
}

.exercise-order {
    width: 28px;
    height: 28px;
    display: flex;
    align-items: center;
    justify-content: center;
    background: var(--color-background);
    border-radius: var(--radius-full);
    font-size: var(--font-size-sm);
    font-weight: 500;
    color: var(--color-text-muted);
}

.exercise-info {
    flex: 1;
    display: flex;
    align-items: center;
    gap: var(--space-2);
}

.exercise-name {
    font-weight: 500;
}

.muscle-group {
    font-size: var(--font-size-sm);
    color: var(--color-text-muted);
    background: var(--color-background);
    padding: var(--space-1) var(--space-2);
    border-radius: var(--radius-sm);
}

.default-sets {
    font-size: var(--font-size-sm);
    color: var(--color-accent);
    font-weight: 500;
}

.exercise-type {
    font-size: var(--font-size-sm);
    color: var(--color-text-muted);
}

.danger-zone {
    padding-top: var(--space-6);
    border-top: 1px solid var(--color-border);
}

.back-link a {
    display: inline-flex;
    align-items: center;
    gap: var(--space-2);
    color: var(--color-text-muted);
}

.back-link a:hover {
    color: var(--color-accent);
}

.back-link svg {
    width: 16px;
    height: 16px;
}

@media (max-width: 640px) {
    .page-header {
        flex-direction: column;
        gap: var(--space-4);
    }

    .exercise-item {
        flex-wrap: wrap;
    }
}
</style>
{% endblock %}
